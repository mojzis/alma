<div class="note" id="note-{{ note.id }}" data-note-id="{{ note.id }}">
    <div class="note-header">
        <div>
            <div class="note-title">{{ note.title }}</div>
            <div class="note-meta">
                {{ note.created[:10] }} | {{ note.project }} | {{ note.type }}
            </div>
        </div>
    </div>

    <div class="note-content">{{ note.content_html | safe }}</div>

    {% if note.tags %}
    <div class="note-tags">
        Tags: {{ note.tags|join(', ') }}
    </div>
    {% endif %}

    {% if note.backlinks %}
    <div class="note-backlinks">
        <strong>Backlinks:</strong>
        {% for backlink_id in note.backlinks %}
            <a href="#note-{{ backlink_id }}" onclick="scrollToNote('{{ backlink_id }}')" class="backlink">
                {{ backlink_id[:8] }}...
            </a>
        {% endfor %}
    </div>
    {% endif %}

    <div class="note-actions">
        <button
            hx-get="/notes/{{ note.id }}/edit"
            hx-target="#note-{{ note.id }}"
            hx-swap="outerHTML"
            class="secondary"
        >Edit</button>
        <button
            hx-delete="/notes/{{ note.id }}"
            hx-target="#note-{{ note.id }}"
            hx-swap="outerHTML swap:300ms"
            hx-confirm="Delete this note?"
            class="danger"
        >Delete</button>
    </div>
</div>
